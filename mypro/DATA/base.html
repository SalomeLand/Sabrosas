<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo de Conexi√≥n con PostgreSQL</title>
    <link rel="stylesheet">
</head>
<body>
    <button id="openFile">Abrir archivo CSV</button>
<script>
  document.getElementById('openFile').addEventListener('click', async () => {
    try {
      const [fileHandle] = await window.showOpenFilePicker({
        types: [{
          description: 'CSV Files',
          accept: {'text/csv': ['.csv']}
        }]
      });
      const file = await fileHandle.getFile();
      const text = await file.text();
      processCSV(text);
    } catch (err) {
      console.error('Error al abrir el archivo:', err);
    }
  });

  function processCSV(text) {
    const rows = text.split('\n');
    rows.forEach(row => {
      const columns = row.split(',');
      console.log(columns);
    });
  }
</script>
    <button id="saveFile">Guardar archivo CSV</button>
    <script>
      let fileHandle;
    
      document.getElementById('saveFile').addEventListener('click', async () => {
        if (!fileHandle) {
          [fileHandle] = await window.showSaveFilePicker({
            suggestedName: 'archivo.csv',
            types: [{
              description: 'CSV Files',
              accept: {'text/csv': ['.csv']}
            }]
          });
        }
    
        const writable = await fileHandle.createWritable();
        const data = [
          ['Nombre', 'Edad', 'Ciudad'],
          ['Juan', '30', 'Madrid'],
          ['Ana', '25', 'Barcelona']
        ];
        const csvContent = data.map(e => e.join(",")).join("\n");
        await writable.write(csvContent);
        await writable.close();
      });
    </script>
</body>
</html>
